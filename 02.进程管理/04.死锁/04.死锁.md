# 第四节、死锁

## 目录

- 死锁的概念**是什么**？
- **为什么**会产生死锁？
- 产生死锁**有什么条件**？
- **怎样**解决死锁问题？

## 一、死锁的概念是什么？

    各进程相互等待对方手里的资源导致各进程阻塞，若无外力作用，无法向前推进的现象。

### 【死锁、饥饿、死循环的区别】补充中......

## 二、为什么会产生死锁？

- 系统资源的争夺
- 进程推进顺序非法
- 信号量使用不当

## 三、产生死锁有什么条件？

- 互斥条件：对必须互斥使用的资源会导致死锁
- 不剥夺条件：进程保持的资源只能主动释放，不可强行剥夺
- 请求和保持条件：保持着某些资源不放的同时，请求别的资源
- 循环等待条件：
  - 存在一种资源的循环等待链
  - 循环等待未必死锁，死锁一定有循环等待

## 四、怎样解决死锁问题？

- 死锁预防
- 避免死锁
- 死锁的检测及解除

#### 1. 死锁预防

- 破坏互斥条件
- 破坏不剥夺条件
- 破坏请求和保持条件
- 破坏循环等待条件

##### Q：预防死锁怎么做？

    1. 破坏互斥资源
        方法：将临界资源改造为可共享使用的资源（如SPOOLing技术）；
        缺点：可行性不高，很多时候无法破坏互斥条件。
    2. 破坏不剥夺条件
        方法一：申请的资源得不到满足时，立即释放拥有的所有资源；
        方法二：申请的资源被其他程序占用时由OS协助剥夺（考虑优先级）；
        缺点：
              1. 实现复杂；
              2. 剥夺资源可能导致部分工作失效；
              3. 反复申请和释放系统开销大；
              4. 可能导致饥饿。
    3. 破坏请求和保持条件
        方法：运行前分配好所有需要的资源，之后一直保持（预先静态分配方法）；
        缺点：资源利用率低，可能导致饥饿。
    4. 破坏循环等待条件
        方法：给资源编号，必须按照编号从小到大的顺序申请资源（顺序资源分配方法）；
        缺点：
              1. 不方便增加新设备；
              2. 会导致资源浪费；
              3. 用户编程麻烦。

完善中...
